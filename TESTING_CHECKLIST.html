<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TypeScript Strict Mode - Testing Checklist</title>
    <style>
        @media print {
            body { margin: 0; padding: 20px; }
            .no-print { display: none; }
            .page-break { page-break-after: always; }
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            background: #fff;
        }
        h1 {
            color: #8b5cf6;
            border-bottom: 3px solid #8b5cf6;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        h2 {
            color: #6d28d9;
            margin-top: 40px;
            margin-bottom: 20px;
            border-left: 4px solid #8b5cf6;
            padding-left: 15px;
        }
        h3 {
            color: #7c3aed;
            margin-top: 25px;
            margin-bottom: 15px;
        }
        .meta-info {
            background: #f3f4f6;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #8b5cf6;
        }
        .meta-info strong {
            color: #6d28d9;
        }
        .checklist {
            list-style: none;
            padding: 0;
        }
        .checklist li {
            padding: 12px 15px;
            margin: 8px 0;
            background: #f9fafb;
            border-left: 3px solid #d1d5db;
            border-radius: 4px;
            position: relative;
            padding-left: 45px;
            display: flex;
            align-items: center;
        }
        .checklist input[type="checkbox"] {
            position: absolute;
            left: 15px;
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #8b5cf6;
        }
        .checklist label {
            cursor: pointer;
            flex: 1;
            user-select: none;
        }
        .checklist input[type="checkbox"]:checked + label {
            text-decoration: line-through;
            opacity: 0.6;
        }
        .priority-critical {
            border-left-color: #dc2626;
            background: #fef2f2;
        }
        .priority-high {
            border-left-color: #ea580c;
            background: #fff7ed;
        }
        .priority-medium {
            border-left-color: #eab308;
            background: #fefce8;
        }
        .badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            margin-left: 10px;
        }
        .badge-critical {
            background: #dc2626;
            color: white;
        }
        .badge-high {
            background: #ea580c;
            color: white;
        }
        .badge-medium {
            background: #eab308;
            color: white;
        }
        .warning-box {
            background: #fef2f2;
            border: 2px solid #dc2626;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .warning-box h3 {
            color: #dc2626;
            margin-top: 0;
        }
        .code-block {
            background: #1f2937;
            color: #f3f4f6;
            padding: 15px 20px;
            border-radius: 6px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.5;
        }
        .code-inline {
            background: #f3f4f6;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 13px;
            color: #6d28d9;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .stat-card {
            background: #f9fafb;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #e5e7eb;
            text-align: center;
        }
        .stat-number {
            font-size: 32px;
            font-weight: bold;
            color: #8b5cf6;
        }
        .stat-label {
            font-size: 14px;
            color: #6b7280;
            margin-top: 5px;
        }
        .file-list {
            background: #f9fafb;
            padding: 15px 20px;
            border-radius: 6px;
            margin: 15px 0;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 13px;
        }
        .file-list li {
            padding: 5px 0;
            list-style-type: none;
        }
        .print-button {
            background: #8b5cf6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 20px;
        }
        .print-button:hover {
            background: #7c3aed;
        }
    </style>
</head>
<body>
    <div class="no-print">
        <button class="print-button" onclick="window.print()">üñ®Ô∏è Print to PDF</button>
    </div>

    <h1>TypeScript Strict Mode - Testing Checklist</h1>

    <div class="meta-info">
        <p><strong>Project:</strong> Fairtune (indiestream)</p>
        <p><strong>Branch:</strong> <span class="code-inline">feature/typescript-strict-mode</span></p>
        <p><strong>Date:</strong> January 22, 2026</p>
        <p><strong>Status:</strong> ‚úÖ All 47 TypeScript errors fixed (0 remaining)</p>
    </div>

    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-number">14</div>
            <div class="stat-label">Commits</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">47</div>
            <div class="stat-label">Errors Fixed</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">35+</div>
            <div class="stat-label">Files Modified</div>
        </div>
        <div class="stat-card">
            <div class="stat-number">100%</div>
            <div class="stat-label">Type Safety</div>
        </div>
    </div>

    <div class="warning-box">
        <h3>‚ö†Ô∏è CRITICAL: Stripe SDK Upgraded</h3>
        <p>Stripe SDK upgraded from <strong>v16.0.0 ‚Üí v20.2.0</strong> for security. This is the highest risk change. Test all payment flows thoroughly.</p>
        <ul>
            <li>API version changed to <span class="code-inline">2025-12-15.clover</span></li>
            <li>Type workarounds applied using <span class="code-inline">as any</span> for subscription properties</li>
            <li>Both main webhooks and Connect webhooks modified</li>
        </ul>
    </div>

    <h2>1. Pre-Testing Setup</h2>
    <div class="code-block">
# Ensure you're on the feature branch
git checkout feature/typescript-strict-mode

# Verify typecheck passes
npm run typecheck
# Expected: ‚úî No errors

# Start dev server
npm run dev

# In another terminal, test build
npm run build
    </div>

    <h2>2. Critical Priority Testing</h2>

    <h3>üî¥ CRITICAL: Stripe Integration <span class="badge badge-critical">Must Test</span></h3>
    <ul class="checklist">
        <li class="priority-critical">
            <input type="checkbox" id="check-1">
            <label for="check-1">Test subscription checkout flow (new user sign-up)</label>
        </li>
        <li class="priority-critical">
            <input type="checkbox" id="check-2">
            <label for="check-2">Verify Stripe webhook receives and processes events</label>
        </li>
        <li class="priority-critical">
            <input type="checkbox" id="check-3">
            <label for="check-3">Check webhook logs for errors after test transaction</label>
        </li>
        <li class="priority-critical">
            <input type="checkbox" id="check-4">
            <label for="check-4">Test subscription sync functionality</label>
        </li>
        <li class="priority-critical">
            <input type="checkbox" id="check-5">
            <label for="check-5">Verify payment confirmation emails/notifications</label>
        </li>
        <li class="priority-critical">
            <input type="checkbox" id="check-6">
            <label for="check-6">Test Stripe Connect for artist payout setup</label>
        </li>
        <li class="priority-critical">
            <input type="checkbox" id="check-7">
            <label for="check-7">Verify Connect webhook processes account events</label>
        </li>
    </ul>

    <h3>üî¥ CRITICAL: File Upload System <span class="badge badge-critical">Must Test</span></h3>
    <ul class="checklist">
        <li class="priority-critical">
            <input type="checkbox" id="check-8">
            <label for="check-8">Upload artist avatar (tests R2 and Buffer casting)</label>
        </li>
        <li class="priority-critical">
            <input type="checkbox" id="check-9">
            <label for="check-9">Upload album cover art</label>
        </li>
        <li class="priority-critical">
            <input type="checkbox" id="check-10">
            <label for="check-10">Upload audio track (FLAC or WAV)</label>
        </li>
        <li class="priority-critical">
            <input type="checkbox" id="check-11">
            <label for="check-11">Test bulk upload process</label>
        </li>
        <li class="priority-critical">
            <input type="checkbox" id="check-12">
            <label for="check-12">Verify files appear in R2 storage</label>
        </li>
        <li class="priority-critical">
            <input type="checkbox" id="check-13">
            <label for="check-13">Test file retrieval/streaming</label>
        </li>
    </ul>

    <h3>üü† HIGH: Dashboard Upload Flow <span class="badge badge-high">Important</span></h3>
    <ul class="checklist">
        <li class="priority-high">
            <input type="checkbox" id="check-14">
            <label for="check-14">Complete full upload wizard (11 errors fixed here)</label>
        </li>
        <li class="priority-high">
            <input type="checkbox" id="check-15">
            <label for="check-15">Test album creation with multiple tracks</label>
        </li>
        <li class="priority-high">
            <input type="checkbox" id="check-16">
            <label for="check-16">Verify duration calculation works</label>
        </li>
        <li class="priority-high">
            <input type="checkbox" id="check-17">
            <label for="check-17">Test track credit assignment</label>
        </li>
        <li class="priority-high">
            <input type="checkbox" id="check-18">
            <label for="check-18">Check ISRC generation</label>
        </li>
        <li class="priority-high">
            <input type="checkbox" id="check-19">
            <label for="check-19">Verify non-null assertions don't cause crashes</label>
        </li>
    </ul>

    <div class="page-break"></div>

    <h2>3. High Priority Testing</h2>

    <h3>üü† Admin Functions <span class="badge badge-high">Important</span></h3>
    <ul class="checklist">
        <li class="priority-high">
            <input type="checkbox" id="check-20">
            <label for="check-20">Test artist approval workflow</label>
        </li>
        <li class="priority-high">
            <input type="checkbox" id="check-21">
            <label for="check-21">Verify avatar URLs load correctly (getDownloadUrl change)</label>
        </li>
        <li class="priority-high">
            <input type="checkbox" id="check-22">
            <label for="check-22">Open album edit modal as admin</label>
        </li>
        <li class="priority-high">
            <input type="checkbox" id="check-23">
            <label for="check-23">Edit album metadata (title, description, dates)</label>
        </li>
        <li class="priority-high">
            <input type="checkbox" id="check-24">
            <label for="check-24">Edit track information</label>
        </li>
        <li class="priority-high">
            <input type="checkbox" id="check-25">
            <label for="check-25">Test content moderation queue</label>
        </li>
        <li class="priority-high">
            <input type="checkbox" id="check-26">
            <label for="check-26">Test featured genres management (drag & drop)</label>
        </li>
    </ul>

    <h3>üü† Dashboard Pages <span class="badge badge-high">Important</span></h3>
    <ul class="checklist">
        <li class="priority-high">
            <input type="checkbox" id="check-27">
            <label for="check-27">View dashboard index with artist stats</label>
        </li>
        <li class="priority-high">
            <input type="checkbox" id="check-28">
            <label for="check-28">Verify stream counts display correctly (null safety)</label>
        </li>
        <li class="priority-high">
            <input type="checkbox" id="check-29">
            <label for="check-29">Test earnings display</label>
        </li>
        <li class="priority-high">
            <input type="checkbox" id="check-30">
            <label for="check-30">Edit user settings (check textarea rows binding)</label>
        </li>
        <li class="priority-high">
            <input type="checkbox" id="check-31">
            <label for="check-31">Update bio and profile information</label>
        </li>
    </ul>

    <h2>4. Medium Priority Testing</h2>

    <h3>üü° Browse & Discovery <span class="badge badge-medium">Test</span></h3>
    <ul class="checklist">
        <li class="priority-medium">
            <input type="checkbox" id="check-32">
            <label for="check-32">Browse /genres page</label>
        </li>
        <li class="priority-medium">
            <input type="checkbox" id="check-33">
            <label for="check-33">Visit specific genre detail pages</label>
        </li>
        <li class="priority-medium">
            <input type="checkbox" id="check-34">
            <label for="check-34">Test genre filtering</label>
        </li>
        <li class="priority-medium">
            <input type="checkbox" id="check-35">
            <label for="check-35">Browse /artists page</label>
        </li>
        <li class="priority-medium">
            <input type="checkbox" id="check-36">
            <label for="check-36">Test artist genre filter (null ‚Üí undefined change)</label>
        </li>
        <li class="priority-medium">
            <input type="checkbox" id="check-37">
            <label for="check-37">View /discover page</label>
        </li>
        <li class="priority-medium">
            <input type="checkbox" id="check-38">
            <label for="check-38">Check recently played tracks</label>
        </li>
        <li class="priority-medium">
            <input type="checkbox" id="check-39">
            <label for="check-39">Test /charts page</label>
        </li>
        <li class="priority-medium">
            <input type="checkbox" id="check-40">
            <label for="check-40">Verify chart data loads correctly</label>
        </li>
    </ul>

    <h3>üü° Playback & Media <span class="badge badge-medium">Test</span></h3>
    <ul class="checklist">
        <li class="priority-medium">
            <input type="checkbox" id="check-41">
            <label for="check-41">Play a track</label>
        </li>
        <li class="priority-medium">
            <input type="checkbox" id="check-42">
            <label for="check-42">Test queue functionality</label>
        </li>
        <li class="priority-medium">
            <input type="checkbox" id="check-43">
            <label for="check-43">Verify audio streaming works</label>
        </li>
        <li class="priority-medium">
            <input type="checkbox" id="check-44">
            <label for="check-44">Test image loading with fade effect (plugin change)</label>
        </li>
        <li class="priority-medium">
            <input type="checkbox" id="check-45">
            <label for="check-45">Check album cover display</label>
        </li>
    </ul>

    <h3>üü° User Flow <span class="badge badge-medium">Test</span></h3>
    <ul class="checklist">
        <li class="priority-medium">
            <input type="checkbox" id="check-46">
            <label for="check-46">Register new account</label>
        </li>
        <li class="priority-medium">
            <input type="checkbox" id="check-47">
            <label for="check-47">Login/logout</label>
        </li>
        <li class="priority-medium">
            <input type="checkbox" id="check-48">
            <label for="check-48">View /pricing page (isSubscribed fix)</label>
        </li>
        <li class="priority-medium">
            <input type="checkbox" id="check-49">
            <label for="check-49">Navigate between pages (check transitions)</label>
        </li>
    </ul>

    <h2>5. Technical Verification</h2>

    <h3>Console & Logs</h3>
    <ul class="checklist">
        <li>
            <input type="checkbox" id="check-50">
            <label for="check-50">Check browser console for JavaScript errors</label>
        </li>
        <li>
            <input type="checkbox" id="check-51">
            <label for="check-51">Check server logs for API errors</label>
        </li>
        <li>
            <input type="checkbox" id="check-52">
            <label for="check-52">Verify no TypeScript compilation warnings</label>
        </li>
        <li>
            <input type="checkbox" id="check-53">
            <label for="check-53">Check network tab for failed requests</label>
        </li>
    </ul>

    <h3>Database Operations</h3>
    <ul class="checklist">
        <li>
            <input type="checkbox" id="check-54">
            <label for="check-54">Verify stores/album.ts type assertions work correctly</label>
        </li>
        <li>
            <input type="checkbox" id="check-55">
            <label for="check-55">Test track sorting (changed to 'as any' parameters)</label>
        </li>
        <li>
            <input type="checkbox" id="check-56">
            <label for="check-56">Check album queries return correct data</label>
        </li>
        <li>
            <input type="checkbox" id="check-57">
            <label for="check-57">Verify realtime updates work (RealtimeChannel casts)</label>
        </li>
    </ul>

    <div class="page-break"></div>

    <h2>6. Specific Risk Areas</h2>

    <div class="warning-box">
        <h3>Files with Strategic Type Casts (Monitor for Runtime Errors)</h3>
        <ul class="file-list">
            <li>üìÑ stores/album.ts - Multiple <span class="code-inline">as Album</span> and <span class="code-inline">as Track</span> casts</li>
            <li>üìÑ pages/dashboard/artist/upload.vue - <span class="code-inline">state.selectedBand!</span> non-null assertions</li>
            <li>üìÑ server/api/bulk-upload/*.post.ts - <span class="code-inline">Buffer as any</span> for fetch body</li>
            <li>üìÑ server/api/stripe/webhook.post.ts - <span class="code-inline">subscription as any</span> for Stripe v20</li>
            <li>üìÑ components/admin/AdminAlbumsTab.vue - <span class="code-inline">albumToEdit as any</span> prop</li>
        </ul>
    </div>

    <h3>Null Safety Checks</h3>
    <ul class="checklist">
        <li>
            <input type="checkbox" id="check-58">
            <label for="check-58">Test pages with missing/null data (empty states)</label>
        </li>
        <li>
            <input type="checkbox" id="check-59">
            <label for="check-59">Test upload flow with band selection (multiple ! assertions)</label>
        </li>
        <li>
            <input type="checkbox" id="check-60">
            <label for="check-60">Test genre pages with no artists</label>
        </li>
        <li>
            <input type="checkbox" id="check-61">
            <label for="check-61">Test dashboard with zero streams/earnings</label>
        </li>
    </ul>

    <h2>7. Regression Testing</h2>

    <h3>Changed Patterns</h3>
    <ul class="checklist">
        <li>
            <input type="checkbox" id="check-62">
            <label for="check-62">Verify 'compilation' albums convert to 'album' correctly</label>
        </li>
        <li>
            <input type="checkbox" id="check-63">
            <label for="check-63">Test UTextarea :rows binding works (was rows="3")</label>
        </li>
        <li>
            <input type="checkbox" id="check-64">
            <label for="check-64">Test null to undefined conversions in forms (ISRC, ISWC, IPI)</label>
        </li>
        <li>
            <input type="checkbox" id="check-65">
            <label for="check-65">Verify BadgeColor literal types display correctly</label>
        </li>
    </ul>

    <h2>8. Performance & Build</h2>

    <div class="code-block">
# Test production build
npm run build

# Check build output for warnings
# Expected: Clean build with no type errors

# Test generated bundle
npm run preview
    </div>

    <ul class="checklist">
        <li>
            <input type="checkbox" id="check-66">
            <label for="check-66">Verify build completes without errors</label>
        </li>
        <li>
            <input type="checkbox" id="check-67">
            <label for="check-67">Check bundle size is reasonable</label>
        </li>
        <li>
            <input type="checkbox" id="check-68">
            <label for="check-68">Test production preview works</label>
        </li>
    </ul>

    <h2>9. Sign-Off Checklist</h2>

    <ul class="checklist">
        <li class="priority-critical">
            <input type="checkbox" id="check-69">
            <label for="check-69">‚úÖ All critical Stripe tests passed</label>
        </li>
        <li class="priority-critical">
            <input type="checkbox" id="check-70">
            <label for="check-70">‚úÖ All file uploads work correctly</label>
        </li>
        <li class="priority-high">
            <input type="checkbox" id="check-71">
            <label for="check-71">‚úÖ Dashboard upload flow completed successfully</label>
        </li>
        <li class="priority-high">
            <input type="checkbox" id="check-72">
            <label for="check-72">‚úÖ Admin functions work as expected</label>
        </li>
        <li class="priority-medium">
            <input type="checkbox" id="check-73">
            <label for="check-73">‚úÖ Browse/discovery pages load correctly</label>
        </li>
        <li class="priority-medium">
            <input type="checkbox" id="check-74">
            <label for="check-74">‚úÖ No console errors during testing</label>
        </li>
        <li>
            <input type="checkbox" id="check-75">
            <label for="check-75">‚úÖ Production build succeeds</label>
        </li>
        <li>
            <input type="checkbox" id="check-76">
            <label for="check-76">‚úÖ TypeScript strict mode enabled and passing</label>
        </li>
        <li>
            <input type="checkbox" id="check-77">
            <label for="check-77">‚úÖ Documentation updated (if needed)</label>
        </li>
        <li>
            <input type="checkbox" id="check-78">
            <label for="check-78">‚úÖ Ready to merge to develop</label>
        </li>
    </ul>

    <h2>10. Post-Merge Actions</h2>

    <ol>
        <li><strong>Merge to develop:</strong>
            <div class="code-block">git checkout develop
git merge feature/typescript-strict-mode</div>
        </li>
        <li><strong>Test again on develop</strong> (quick smoke test)</li>
        <li><strong>Deploy to staging</strong> (if available)</li>
        <li><strong>Monitor Stripe webhooks</strong> in production carefully</li>
        <li><strong>Merge to main</strong> after develop testing passes</li>
    </ol>

    <h2>Emergency Rollback Plan</h2>

    <p>If critical issues are discovered:</p>
    <div class="code-block">
# Rollback develop
git checkout develop
git reset --hard HEAD~1

# Or revert specific commits
git revert &lt;commit-hash&gt;
    </div>

    <div class="warning-box">
        <h3>‚ö†Ô∏è Known Type Workarounds (Document for Future)</h3>
        <ul>
            <li><strong>Stripe v20:</strong> Subscription type incompatibilities required <span class="code-inline">as any</span> casts</li>
            <li><strong>Supabase queries:</strong> Database types don't match app types, used strategic casts</li>
            <li><strong>Buffer in fetch:</strong> TypeScript doesn't recognize Buffer as valid fetch body</li>
        </ul>
        <p><em>Consider opening issues with respective libraries or updating type definitions in future.</em></p>
    </div>

    <hr style="margin: 40px 0; border: none; border-top: 2px solid #e5e7eb;">

    <p style="text-align: center; color: #6b7280; font-size: 14px;">
        Generated for TypeScript Strict Mode Migration<br>
        Fairtune ¬∑ January 2026
    </p>
</body>
</html>
